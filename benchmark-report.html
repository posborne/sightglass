<!doctype html>
<html lang="en-us">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>Sightglass Benchmark Results</title>
        <meta name="description" content="Sightglass Benchmark Results Visualization">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <script src="https://cdn.jsdelivr.net/npm/vega@6"></script>
        <script src="https://cdn.jsdelivr.net/npm/vega-lite@6"></script>
        <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
        
        <script type="application/json" id="vega-lite-14490610055901886335">
            {"$schema":"https://vega.github.io/schema/vega-lite/v4.json","title":"./benchmarks/bz2","hconcat":[{"data":{"values":[]},"encoding":{"color":{"field":"prefix","legend":{"title":"Engine"}},"x":{"axis":{"title":"cycles"},"field":"count","type":"quantitative"},"y":{"field":"prefix","type":"nominal"}},"mark":"boxplot"},{"data":{"values":[]},"encoding":{"color":{"field":"prefix","legend":{"title":"Prefix"}},"x":{"axis":{"title":"delta p25 as percentage"},"field":"p25_delta_pct","type":"quantitative"},"y":{"field":"prefix","type":"nominal"}},"mark":"boxplot"}]}
        </script>
        
        <script type="application/json" id="vega-lite-7738690880018537439">
            {"$schema":"https://vega.github.io/schema/vega-lite/v4.json","title":"./benchmarks/pulldown-cmark","hconcat":[{"data":{"values":[]},"encoding":{"color":{"field":"prefix","legend":{"title":"Engine"}},"x":{"axis":{"title":"cycles"},"field":"count","type":"quantitative"},"y":{"field":"prefix","type":"nominal"}},"mark":"boxplot"},{"data":{"values":[]},"encoding":{"color":{"field":"prefix","legend":{"title":"Prefix"}},"x":{"axis":{"title":"delta p25 as percentage"},"field":"p25_delta_pct","type":"quantitative"},"y":{"field":"prefix","type":"nominal"}},"mark":"boxplot"}]}
        </script>
        
        <script type="application/json" id="vega-lite-2622389092316791780">
            {"$schema":"https://vega.github.io/schema/vega-lite/v4.json","title":"./benchmarks/spidermonkey","hconcat":[{"data":{"values":[]},"encoding":{"color":{"field":"prefix","legend":{"title":"Engine"}},"x":{"axis":{"title":"cycles"},"field":"count","type":"quantitative"},"y":{"field":"prefix","type":"nominal"}},"mark":"boxplot"},{"data":{"values":[]},"encoding":{"color":{"field":"prefix","legend":{"title":"Prefix"}},"x":{"axis":{"title":"delta p25 as percentage"},"field":"p25_delta_pct","type":"quantitative"},"y":{"field":"prefix","type":"nominal"}},"mark":"boxplot"}]}
        </script>
        
        <style>
            .slower {
                background: lightcoral;
                font-weight: bold;
            }

            .faster {
                background: lightgreen;
                font-weight: bold;
            }

            .inconsistent {
                background: lightgray;
            }

            .controls {
                background: #f5f5f5;
                padding: 15px;
                margin: 20px 0;
                border-radius: 5px;
                border: 1px solid #ddd;
            }

            .control-group {
                display: inline-block;
                margin-right: 20px;
                vertical-align: top;
            }

            .control-group label {
                display: block;
                font-weight: bold;
                margin-bottom: 5px;
            }

            .hidden-benchmark {
                display: none;
            }

            .hidden-row {
                display: none;
            }
        </style>
    </head>
    <body>
        <h1>Sightglass Benchmark Results</h1>
        <div>
            <span style="font-weight:bold">Key:</span>
            <span class="inconsistent">High CV (> 5%) -- Noisy/Flaky Test</span>
            <span class="slower">Statistically Significantly Slower</span>
            <span class="faster">Statistically Significantly Faster</span>
            <span>No highlighting = No significant difference</span>
        </div>
        <div>
            Results show statistical significance based on <a href="#effect-size-methodology">effect size analysis</a> with 95% confidence intervals (α = 0.05).
            CV is the <a href="https://en.wikipedia.org/wiki/Coefficient_of_variation">Coefficient of Variation</a>, indicating measurement consistency.
        </div>

        <div class="controls">
            <div class="control-group">
                <label>
                    <input type="checkbox" id="significant-only" onchange="updateFilters()">
                    Show only statistically significant results
                </label>
            </div>
            <div class="control-group">
                <label>
                    <input type="checkbox" id="hide-noisy" onchange="updateFilters()">
                    Hide noisy tests (CV > 5%)
                </label>
            </div>
            <div class="control-group">
                <span id="visible-benchmarks"></span>
            </div>
        </div>

        <table style="padding-top:20px" id="results-table">
            <thead>
                <tr>
                    <th scope="col">Benchmark</th>
                    <th scope="col">CV%</th>
                    <th scope="col">v38-large-memory-guard-size (baseline)</th>
                    
                        
                    
                        
                        <th scope="col">v38-large-memory-reservation</th>
                        
                    
                </tr>
            </thead>
            <tbody>
                
                
                
                
                
                    
                
                    
                        
                        
                            
                        
                    
                
                <tr class="benchmark-row"
                    data-has-significant="true"
                    data-baseline-cv="0.7442641472670545"
                    data-benchmark-name="./benchmarks/bz2">
                    <td><a href="#./benchmarks/bz2">./benchmarks/bz2</a></td>
                    
                    
                    
                    <td class="">0.74%</td>
                    
                    <td class="cycle-count">73486225</td>
                    
                    
                        
                    
                        
                        
                        
                            
                                
                                    
                                    <td class="slower">33.14% slower</td>
                                
                            
                        
                        
                    
                </tr>
                
                
                
                
                
                    
                
                    
                
                <tr class="benchmark-row"
                    data-has-significant="false"
                    data-baseline-cv="4.604077150827912"
                    data-benchmark-name="./benchmarks/pulldown-cmark">
                    <td><a href="#./benchmarks/pulldown-cmark">./benchmarks/pulldown-cmark</a></td>
                    
                    
                    
                    <td class="">2.25%</td>
                    
                    <td class="cycle-count">6264910</td>
                    
                    
                        
                    
                        
                        
                        
                            <td>No significant difference</td>
                        
                        
                    
                </tr>
                
                
                
                
                
                    
                
                    
                        
                        
                            
                        
                    
                
                <tr class="benchmark-row"
                    data-has-significant="true"
                    data-baseline-cv="1.5774302945192182"
                    data-benchmark-name="./benchmarks/spidermonkey">
                    <td><a href="#./benchmarks/spidermonkey">./benchmarks/spidermonkey</a></td>
                    
                    
                    
                    <td class="">1.64%</td>
                    
                    <td class="cycle-count">720737625</td>
                    
                    
                        
                    
                        
                        
                        
                            
                                
                                    
                                    <td class="slower">36.06% slower</td>
                                
                            
                        
                        
                    
                </tr>
                
            </tbody>
        </table>

        <div id="benchmark-details">
            
            
            
            
                
            
                
                    
                
            
            <div class="benchmark-detail"
                 data-has-significant="true"
                 data-baseline-cv="0.7442641472670545"
                 data-benchmark-name="./benchmarks/bz2">
                <h2 id="./benchmarks/bz2">./benchmarks/bz2</h2>
            <ul>
                <li><strong>Baseline:</strong> <span class="cycle-count">73801902</span> cycles (<span >CV: 0.74%</span>)</li>
                
                    
                
                    
                        
                            
                            
                                
                                    
                                    <li>v38-large-memory-reservation: <span class="slower">33.14% slower</span>
                                
                                
                                    (95% confident with ±147341.25 cycles margin)
                                
                                (CV: 0.51%)</li>
                            
                        
                    
                
            </ul>
            <div id="viz-14490610055901886335"></div>
            </div>
            
            
            
            
                
            
                
            
            <div class="benchmark-detail"
                 data-has-significant="false"
                 data-baseline-cv="4.604077150827912"
                 data-benchmark-name="./benchmarks/pulldown-cmark">
                <h2 id="./benchmarks/pulldown-cmark">./benchmarks/pulldown-cmark</h2>
            <ul>
                <li><strong>Baseline:</strong> <span class="cycle-count">7612268</span> cycles (<span >CV: 4.60%</span>)</li>
                
                    
                
                    
                        
                            <li>v38-large-memory-reservation: No significant difference (0.00%) (CV: 4.60%)</li>
                        
                    
                
            </ul>
            <div id="viz-7738690880018537439"></div>
            </div>
            
            
            
            
                
            
                
                    
                
            
            <div class="benchmark-detail"
                 data-has-significant="true"
                 data-baseline-cv="1.5774302945192182"
                 data-benchmark-name="./benchmarks/spidermonkey">
                <h2 id="./benchmarks/spidermonkey">./benchmarks/spidermonkey</h2>
            <ul>
                <li><strong>Baseline:</strong> <span class="cycle-count">990597985</span> cycles (<span >CV: 1.58%</span>)</li>
                
                    
                
                    
                        
                            
                            
                                
                                    
                                    <li>v38-large-memory-reservation: <span class="slower">36.06% slower</span>
                                
                                
                                    (95% confident with ±3895708.53 cycles margin)
                                
                                (CV: 1.58%)</li>
                            
                        
                    
                
            </ul>
            <div id="viz-2622389092316791780"></div>
            </div>
            
        </div>

        <script type="text/javascript">
         function renderViz(chart_id) {
           let vl_text = document.getElementById(`vega-lite-${chart_id}`).textContent;
           let vl_data = JSON.parse(vl_text);
           vegaEmbed(`#viz-${chart_id}`, vl_data);
         }
         
         renderViz("14490610055901886335");
         
         renderViz("7738690880018537439");
         
         renderViz("2622389092316791780");
         

         // Simple data for filtering - most data is now in HTML data attributes

         function updateFilters() {
             const significantOnly = document.getElementById('significant-only').checked;
             const hideNoisy = document.getElementById('hide-noisy').checked;

             const rows = document.querySelectorAll('.benchmark-row');
             const details = document.querySelectorAll('.benchmark-detail');
             let visibleCount = 0;

             // Filter table rows and benchmark details
             rows.forEach((row, index) => {
                 const hasSignificant = row.dataset.hasSignificant === 'true';
                 const baselineCv = parseFloat(row.dataset.baselineCv);

                 let shouldShow = true;

                 // Apply noise filter
                 if (hideNoisy && baselineCv > 5) {
                     shouldShow = false;
                 }

                 // Apply significance filter
                 if (significantOnly && !hasSignificant) {
                     shouldShow = false;
                 }

                 // Show/hide row and corresponding detail
                 row.style.display = shouldShow ? '' : 'none';
                 if (details[index]) {
                     details[index].style.display = shouldShow ? '' : 'none';
                 }

                 if (shouldShow) visibleCount++;
             });

             // Update counter
             document.getElementById('visible-benchmarks').textContent =
                 `Showing ${visibleCount} of ${rows.length} benchmarks`;
         }

         // Format numbers with commas using toLocaleString()
         function formatCycleCounts() {
             document.querySelectorAll('.cycle-count').forEach(element => {
                 const num = parseInt(element.textContent.trim());
                 if (!isNaN(num)) {
                     element.textContent = num.toLocaleString();
                 }
             });
         }

         // Initialize filters and formatting on page load
         document.addEventListener('DOMContentLoaded', function() {
             updateFilters();
             formatCycleCounts();
         });
        </script>

        <div id="effect-size-methodology" style="margin-top: 40px; padding: 20px; background: #f9f9f9; border-radius: 5px;">
            <h2>Statistical Methodology</h2>
            <p>
                This report follows the <a href="https://github.com/bytecodealliance/rfcs/blob/main/accepted/benchmark-suite.md" target="_blank">Bytecode Alliance RFC standards</a>
                for statistically rigorous performance analysis, using <strong>effect size analysis</strong> with confidence intervals
                rather than simple averages or visual comparisons.
            </p>
            <p>
                <strong>Statistical Foundation:</strong> Built on Student's t-test principles for comparing two means, with Behrens-Fisher analysis
                for unequal variances. This provides confidence intervals like "95% confident that engine A is 1.05x to 1.15x faster than engine B"
                or "there is no statistically significant difference in performance between the engines".
            </p>
            <p><strong>This approach quantifies both:</strong></p>
            <ul>
                <li><strong>Statistical significance</strong>: Whether the performance difference is likely real (not due to measurement noise)</li>
                <li><strong>Practical significance</strong>: The magnitude of the performance difference with confidence bounds</li>
            </ul>
            <p>
                <strong>Key Metrics:</strong> Analysis focuses on execution cycles as the primary metric, with coefficient of variation (CV)
                used to assess measurement reliability. Tests with CV > 5% are flagged as potentially noisy.
            </p>
            <p>
                <strong>References:</strong>
                <a href="https://github.com/bytecodealliance/rfcs/blob/main/accepted/benchmark-suite.md" target="_blank">Benchmark Suite RFC</a> |
                <a href="https://github.com/bytecodealliance/sightglass#benchmarking-with-sightglass" target="_blank">Sightglass Documentation</a>
            </p>
        </div>
    </body>
</html>